<!DOCTYPE html>
<html lang="zh-hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>我的画板</title>
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>
    <button id="eraser">橡皮</button>
    <canvas id="xxx" width="400" height="500"></canvas>


    <script>        
        var yyy=document.getElementById('xxx')
        var pageWidth=document.documentElement.clientWidth
        var pageHeight=document.documentElement.clientHeight      
        yyy.width=pageWidth
        yyy.height=pageHeight
        var context = yyy.getContext('2d')
        var painting =false
        var lastPoint={'x':undefined,'y':undefined}


        yyy.onmousedown=function(a){
            painting =true            
            var x=a.clientX
            var y=a.clientY
            
            if(usingEraser){
                context.clearRect(x,y,20,20)
            }else{
                lastPoint={'x':x,'y':y}
            context.beginPath()
            context.arc(x,y,0.2,0,Math.PI*2)
            context.fill() 
            }          

        }
        yyy.onmousemove=function(a){
            if (painting){
                var x=a.clientX
                var y=a.clientY
                newPoint={'x':x,'y':y}
                if(usingEraser){
                    context.clearRect(x,y,20,20)
                }else{
                    context.beginPath()
                    context.arc(x,y,0.2,0,Math.PI*2)
                    context.fill()                
                    drawLine(lastPoint.x,lastPoint.y,newPoint.x,newPoint.y)
                    lastPoint=newPoint
                }
                    
            }            
        }

        yyy.onmouseup =function(a){
            painting =false
        }

        function drawLine(x1,y1,x2,y2){    //连线函数
            context=xxx.getContext('2d');
            context.beginPath();
            context.moveTo(x1,y1);
            context.lineWidth=4;
            context.lineTo(x2,y2);
            context.stroke();
            context.closePath(); 
        }

 
    var usingEraser=false
        eraser.onclick=function(a){
            usingEraser=!usingEraser
        }
    
        
    </script>
</body>
</html>